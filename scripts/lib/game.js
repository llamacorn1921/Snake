define(["./lib/snake","./lib/apple"],function(t,n){let i;let s;let e;let o=false;let l=true;let d=1;let c={width:20,height:20,pos:{x:null,y:null}};let u={width:11,height:11,pos:{x:null,y:null}};function p(){s.clearRect(0,0,i.width,i.height)}function a(){let e=t.draw();c.pos.x=e.x;c.pos.y=e.y;h();n.draw()}function r(){if(l){p();a()}window.requestAnimationFrame(r)}document.getElementById("reset").addEventListener("click",()=>{t.reset();e=n.destroy();u.pos=e.pos;o=e.eaten;d=1;document.getElementById("score").innerHTML=0});document.getElementById("pause").addEventListener("click",()=>{if(l){l=false;document.getElementById("pause").innerHTML="Resume"}else{l=true;document.getElementById("pause").innerHTML="Pause"}});function h(){if(u.pos.x<c.pos.x+c.width&&u.pos.x+u.width>c.pos.x&&u.pos.y<c.pos.y+c.height&&u.pos.y+u.height>c.pos.y){if(o===false){o=true}e=n.destroy();u.pos=e.pos;o=e.eaten;document.getElementById("score").innerHTML=d++}}return{init:function(e){s=e.ctx;i={canvas:e.canvas,width:e.width,height:e.height,ctx:e.ctx};u.pos=n.init(e.ctx);t.init(e.ctx);r()},input:function(e){t.move(e)}}});